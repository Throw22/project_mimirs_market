<header class="page-header">
 <h1>Products</h1>

</header>

<form action="/search" method="GET">
  <div class="form-group">
    <input type="text" name="searchText" class="form-control" id="search_text" placeholder="Search">
     <button type="submit" class="btn btn-primary">Submit Search</button>
  </div>
</form>

<form action="/filter" method="GET">
  <div class="form-group">
    <input type="number" name="minPrice" class="form-control" id="min_price" placeholder="Minimum Price">
    <input type="number" name="maxPrice" class="form-control" id="max_price" placeholder="Maximum Price">
    <select name="product[categoryId]" id="category" class="form-control">
      <option value=""></option>
        {{#each categories as |category| }}
          <option value="{{ category.id }}">{{ category.name }}</option>
        {{/each }}
      </select>
    </div>
     <button type="submit" class="btn btn-primary">Submit Search</button>
  </div>
</form>

<form action="/order" method="GET">
  <div class="form-group">
    <select name="orderBy" id="sort_by" class="form-control">
      <option value="">Order By:</option>
      <option value="&quot;name&quot;">By name ascending</option>
      <option value="&quot;name&quot; DESC">By name descending</option>
      <option value="&quot;price&quot;">By price ascending</option>
      <option value="&quot;price&quot; DESC">By price ascending</option>
      <option value="&quot;createdAt&quot;">Oldest first</option>
      <option value="&quot;createdAt&quot; DESC">Newest first</option>
    </select>
    <button type="submit" class="btn btn-primary">Sort</button>
  </div>
</form>

<div class="row">
  <div class="col-xs-12 text-center">
    <h2>Products:</h2>
    {{#if hasSearched}}
    <h2>Results from search: {{search}}<h2>
    {{/if}}
    {{#if hasFiltered}}
    <h2>Results from filtering (min price: {{minPrice}}, max price: {{maxPrice}}, category: {{categoryId}})<h2>
    {{/if}}
  </div>
</div>
<div class="clearfix"></div>
<div class="row">
 {{#each products as |product|}}
    <div class="col-xs-4 index-img">
      <img src="/images/{{product.photo}}" height="180" width="180" /><br>
      <div class="text-center">
        {{#if (isInCart product.id ../cartProducts)}}
        <form action="/cart" method="GET">
          <p><a href="/products/{{product.id}}">{{product.name}}</a></p>
          <p>{{product.price}}</p>
          <p>{{product.Category.name}}</p>
          <button type="submit" class="btn btn-success">Edit Cart</button>
        </form>
        {{else}}
        <form action="/addToCart" method="POST">
          <input type="hidden" name="productId" value="{{product.id}}">
          <p><a href="/products/{{product.id}}">{{product.name}}</a></p>
          <p>{{product.price}}</p>
          <p>{{product.Category.name}}</p>
          <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
        {{/if}}
      </div>
    </div>
  {{/each}}
</div>
<div class="clearfix"></div>
